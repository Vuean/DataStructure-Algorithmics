# 第4章 串、数组和广义表

字符串一般简称为串。串是一种特殊的线性表，其特殊性体现在数据元素是一个字符，也就是说，**串是一种内容受限的线性表**。

本章后两部分讨论的多维数组和广义表可以看成是线性表的一种扩充，即线性表的数据元素自身又是一个数据结构。高级语言都支持数组，但在高级语言中，重点介绍数组的使用，而本章重点介绍数组的内部实现，并介绍对于一些特殊的二维数组如何实现压缩存储。最后介绍广义表的基本概念和存储结构。

## 4.1 串的定义

**串**(string)(或字符串)是由零个或多个字符组成的有限序列，一般记为：s = "a1a2 … an"。

其中，s是串的名，用双引号括起来的字符序列是串的值；ai(1≤i≤n)可以是字母、数字或其他字符；串中字符的数目n称为串的长度。零个字符的串称为**空串**(null string)，其长度为零。

> 相关术语

- **子串**：一个串中任意个连续的字符组成的子序列(含空串)称为该串的子串。

- **主串**：包含子串的串相应地称为主串。

- **字符位置**：通常称字符在序列中的序号为该字符在串中的位置。

- **子串的位置**：子串的第一个字符在主串中的位置。

- **空格串**：一个或多个空格组成的串，与空串不同。

- **串相等**：当且仅当这两个串的值相等。也就是说，只有当两个串的长度相等，并且各个对应位置的字符都相等时才相等。

- 所有的空串都是相等的。

## 4.2 案例的引入

## 4.3 串的类型定义、存储结构及其运算

### 4.3.1 串的抽象类型定义

```C++
    ADT string{
        数据对象：
        数据关系：
        基本操作：
            1. StrAssign(&T, chars);    // 串赋值
            2. StrCompare(S, T);        // 串比较
            3. StrLenght(S);            // 求串长
            4. Concat(&T, S1, S2);      // 串连结
            5. SubString(&Sub, S, pos, len);    // 求子串
            6. StrCopy(&T, S);          // 串拷贝
            7. StrEmpty(S);             // 串判空
            8. ClearString(&S);         // 清空串
            9. Index(S, T, pos);        // 子串的位置
            10. Replace(&S, T, V);      // 串替换
            11. StrInsert(&S, pos, T);  // 子串插入
            12. StrDelete(&S, pos, len);    // 子串删除
            13. DestoryString(&S);      // 串销毁
    }
```

### 4.3.2 串的存储结构

串中元素逻辑关系与线性表的相同，串可以采用与线性表相同的存储结构：**顺序存储和链式存储**。

1. 串的顺序存储结构

    类似于线性表的顺序存储结构，用一组地址连续的存储单元存储串值的字符序列。按照预定义的大小，为每个定义的串变量分配一个固定长度的存储区，则可用定长数组如下描述：

    ```C++
        #define MAXLEN 255
        struct SString{
            char ch[MAXLEN+1];
            int length;
        };
    ```

    其中，MAXLEN表示串的最大长度，ch是存储字符串的一维数组，每个分量存储一个字符，length表示字符串的当前长度。其中，后面算法描述当中所用到的顺序存储的字符串都是从下标为1的数组分量开始存储的，下标为0的分量闲置不用。

2. 串的链式存储结构

    顺序串的插入和删除操作不方便，需要移动大量的字符。因此，可采用单链表方式存储串。由于串结构的特殊性——结构中的每个数据元素是一个字符，则在用链表存储串值时，存在一个“结点大小”的问题，即每个结点可以存放一个字符，也可以存放多个字符。

    ![串值的链表存储方式](https://github.com/Vuean/DataStructure-Algorithmics/blob/main/Chapter4%20String/%E4%B8%B2%E5%80%BC%E7%9A%84%E9%93%BE%E8%A1%A8%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F.png)

    如图(a)中所示，结点大小为4，图(b)，结点大小为1。

    - 串的链式存储结构——块链结构

    ```C++
        #define CHUNKSIZE 80    // 块的大小可自由定义
        struct Chunk{
            char ch[CHUNKSIZE];
            Chunk* next;
        };
        
        struct LString{
            Chunk *head, *tail; // 串的头指针和尾指针
            int curlen; // 串当前的长度
        };  // 字符串的块链结构
    ```

## 4.3.3 串的模式匹配算法
